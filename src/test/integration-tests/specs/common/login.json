[
    {
        "title": "Set kbase session cookie (simulate login)",
        "selector": [],
        "action": "set-session-cookie",
        "params": {
            "name": "kbase_session",
            "path": "/",
            "value": "${token}"
        }
    },
    {
        "title": "Ensure the logged-in menu appears, then open the user menu",
        "selector": {
            "type": "absolute",
            "path": [
                {
                    "type": "plugin",
                    "value": "login"
                },
                {
                    "type": "menu",
                    "value": "signed-in"
                },
                {
                    "type": "button",
                    "value": "avatar"
                }
            ]
        },
        "wait": 10000,
        "action": "click"
    },
    {
        "title": "Username should be now rendered",
        "selector": {
            "type": "absolute",
            "path": [
                {
                    "type": "plugin",
                    "value": "login"
                },
                {
                    "type": "menu",
                    "value": "signed-in"
                },
                {
                    "type": "label",
                    "value": "username"
                }
            ]
        },
        "waitUntilText": {
            "value": "${username}",
            "wait": 10000
        }
    },
    {
        "title": "close menu",
        "selector": {
            "type": "absolute",
            "path": [
                {
                    "type": "plugin",
                    "value": "login"
                },
                {
                    "type": "menu",
                    "value": "signed-in"
                },
                {
                    "type": "button",
                    "value": "avatar"
                }
            ]
        },
        "action": "click"
    }
]
